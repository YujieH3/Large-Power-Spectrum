mprof.py: Sampling memory every 0.1s
running new process
Random field creation: 35.23262016568333 s
Time for FFTW object creation: 111.92855671420693 s
Time for FFTW: 1.2828214215114713 s
Time for FFTW: 1.152057739906013 s
Time for FFTW: 1.1054276963695884 s
Time for FFTW: 1.08678306825459 s
Time for FFTW: 1.0914804814383388 s
Filename: /appalachia/d6/yujie/Test_PowerSpec/tmptest.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
     8     96.7 MiB     96.7 MiB           1   @profile
     9                                         def run():
    10     96.7 MiB      0.0 MiB           1     t0 = time.perf_counter()
    11  16481.6 MiB  16384.9 MiB           1     arr = np.random.rand(NSIZE, NSIZE, NSIZE) + 1j * np.random.rand(NSIZE, NSIZE, NSIZE)
    12   8289.6 MiB  -8192.0 MiB           1     arr = arr.astype('complex64')
    13   8289.6 MiB      0.0 MiB           1     t = time.perf_counter() - t0
    14   8289.6 MiB      0.0 MiB           1     print("Random field creation: {} s".format(t))
    15                                         
    16                                           # Create FFTW object
    17   8289.6 MiB      0.0 MiB           1     t0 = time.perf_counter()
    18   8289.6 MiB      0.0 MiB           1     a = pyfftw.empty_aligned((NSIZE, NSIZE, NSIZE), dtype='complex64')
    19  16483.1 MiB   8193.5 MiB           1     fft_object = pyfftw.FFTW(a, a, axes=(0, 1, 2), threads=32)
    20  16483.1 MiB      0.0 MiB           1     t = time.perf_counter() - t0
    21  16483.1 MiB      0.0 MiB           1     print("Time for FFTW object creation: {} s".format(t))
    22                                         
    23                                           # Perform FFT
    24  16499.3 MiB -32768.0 MiB           6     for i in range(5):
    25  16499.3 MiB -24576.0 MiB           5       t0 = time.perf_counter()
    26  16499.3 MiB -32751.8 MiB           5       arr = fft_object(arr)
    27  16499.3 MiB -32768.0 MiB           5       t = time.perf_counter() - t0
    28  16499.3 MiB -32768.0 MiB           5       print("Time for FFTW: {} s".format(t))


